create table app_user (username varchar(100) not null, version integer not null, password varchar(255), first_name varchar(100) not null, last_name varchar(100) not null, address varchar(255), city varchar(255), province varchar(255), country varchar(255), postal_code varchar(255), email varchar(100) not null unique, phone_number varchar(255), website varchar(255), password_hint varchar(255), id integer not null, enabled bit, organizationid bigint, serviceareaid bigint, employeenumber integer, jobtitle varchar(100), mobilephone varchar(30), workplace varchar(100), invoice_address varchar(255), invoice_city varchar(255), invoice_province varchar(255), invoice_country varchar(255), invoice_postal_code varchar(255), invoice_name varchar(255), closest_leader varchar(255), hash varchar(255), primary key (username)) type=InnoDB;
create table attachment (id bigint not null auto_increment, contenttype varchar(100), courseid bigint, filename varchar(100), locationid bigint, size bigint, storedname varchar(255), primary key (id)) type=InnoDB;
create table configuration (cfg_key varchar(100) not null, value varchar(100) not null, primary key (cfg_key)) type=InnoDB;
create table course (id bigint not null auto_increment, role varchar(50) not null, instructorid bigint not null, responsibleusername varchar(100), responsibleid bigint, serviceareaid bigint not null, detailurl varchar(200), duration varchar(100) not null, feexternal double precision not null, feeinternal double precision not null, freezeAttendance datetime not null, copyid bigint, maxattendants integer not null, name varchar(100) not null, registerby datetime not null, registerstart datetime, reminder datetime, reservedinternal integer not null, starttime datetime not null, stoptime datetime not null, type varchar(50), description text, locationid bigint not null, organizationid bigint not null, status integer not null, restricted bit, primary key (id)) type=InnoDB;
create table location (id bigint not null auto_increment, selectable bit not null, address varchar(50) not null, mailaddress varchar(100), contactname varchar(50), email varchar(50), detailurl varchar(200), mapurl varchar(200), name varchar(50) not null, phone varchar(30), owner varchar(50), maxattendants integer, feeperday double precision, description text, organizationid bigint not null, primary key (id)) type=InnoDB;
create table notification (id bigint not null auto_increment, registrationid bigint not null, reminderSent bit not null, primary key (id)) type=InnoDB;
create table organization (id bigint not null auto_increment, selectable bit not null, name varchar(50) not null, number bigint not null, invoice_address varchar(255), invoice_city varchar(255), invoice_province varchar(255), invoice_country varchar(255), invoice_postal_code varchar(255), invoice_name varchar(255), primary key (id)) type=InnoDB;
create table person (id bigint not null auto_increment, selectable bit not null, detailurl varchar(200), email varchar(50) not null, mailaddress varchar(100), name varchar(50) not null, phone varchar(30), mobilephone varchar(30), description text, primary key (id)) type=InnoDB;
create table registration (id bigint not null auto_increment, courseid bigint not null, username varchar(100), email varchar(255) not null, employeenumber integer, firstname varchar(100) not null, invoiced bit not null, jobtitle varchar(100), lastname varchar(100) not null, mobilephone varchar(30), locale varchar(10) not null, organizationid bigint, phone varchar(30), registered datetime not null, reserved bit not null, serviceareaid bigint, usemailaddress varchar(100), comment varchar(255), attended bit not null, workplace varchar(100), invoice_address varchar(255), invoice_city varchar(255), invoice_province varchar(255), invoice_country varchar(255), invoice_postal_code varchar(255), invoice_name varchar(255), closest_leader varchar(255), primary key (id)) type=InnoDB;
create table role (name varchar(100) not null, version integer not null, description varchar(255), primary key (name)) type=InnoDB;
create table servicearea (id bigint not null auto_increment, name varchar(100) not null, selectable bit not null, organizationid bigint not null, primary key (id)) type=InnoDB;
create table user_cookie (id bigint not null, username varchar(30) not null, cookie_id varchar(100) not null, date_created datetime not null, primary key (id)) type=InnoDB;
create table user_role (username varchar(100) not null, role_name varchar(100) not null, primary key (username, role_name)) type=InnoDB;
alter table app_user add index FK459C5729E058A465 (organizationid), add constraint FK459C5729E058A465 foreign key (organizationid) references organization (id);
alter table app_user add index FK459C5729179C401B (serviceareaid), add constraint FK459C5729179C401B foreign key (serviceareaid) references servicearea (id);
alter table attachment add index FK8AF759236C3B7B35 (courseid), add constraint FK8AF759236C3B7B35 foreign key (courseid) references course (id);
alter table attachment add index FK8AF7592399F3E2E9 (locationid), add constraint FK8AF7592399F3E2E9 foreign key (locationid) references location (id);
alter table course add index FKAF42E01BC4F84E71 (instructorid), add constraint FKAF42E01BC4F84E71 foreign key (instructorid) references person (id);
alter table course add index FKAF42E01BE058A465 (organizationid), add constraint FKAF42E01BE058A465 foreign key (organizationid) references organization (id);
alter table course add index FKAF42E01B99F3E2E9 (locationid), add constraint FKAF42E01B99F3E2E9 foreign key (locationid) references location (id);
alter table course add index FKAF42E01B7FCD873B (responsibleusername), add constraint FKAF42E01B7FCD873B foreign key (responsibleusername) references app_user (username);
alter table course add index FKAF42E01B179C401B (serviceareaid), add constraint FKAF42E01B179C401B foreign key (serviceareaid) references servicearea (id);
alter table location add index FK714F9FB5E058A465 (organizationid), add constraint FK714F9FB5E058A465 foreign key (organizationid) references organization (id);
alter table notification add index FK237A88EB5F05D1F1 (registrationid), add constraint FK237A88EB5F05D1F1 foreign key (registrationid) references registration (id);
alter table registration add index FKAF83E8B96C3B7B35 (courseid), add constraint FKAF83E8B96C3B7B35 foreign key (courseid) references course (id);
alter table registration add index FKAF83E8B9E058A465 (organizationid), add constraint FKAF83E8B9E058A465 foreign key (organizationid) references organization (id);
alter table registration add index FKAF83E8B9928F9645 (username), add constraint FKAF83E8B9928F9645 foreign key (username) references app_user (username);
alter table registration add index FKAF83E8B9179C401B (serviceareaid), add constraint FKAF83E8B9179C401B foreign key (serviceareaid) references servicearea (id);
alter table servicearea add index FK8D1534C2E058A465 (organizationid), add constraint FK8D1534C2E058A465 foreign key (organizationid) references organization (id);
create index user_cookie_username_cookie_id on user_cookie (username, cookie_id);
alter table user_role add index FK143BF46AB6692ECE (role_name), add constraint FK143BF46AB6692ECE foreign key (role_name) references role (name);
alter table user_role add index FK143BF46A928F9645 (username), add constraint FK143BF46A928F9645 foreign key (username) references app_user (username);